{% extends "base.html" %}

{% block title %}My Messages{% endblock %}

{% block content %}
    <h1>My Messages</h1>
    <p>Here are all your conversations with dealers.</p>

    <div class="notification-list">
        {% if conversations %}
            {% for conv in conversations %}
                <a href="{{ url_for('main.view_buyer_conversation', conversation_id=conv.id) }}" class="notification-item-link">
                    <div class="notification-item">
                        <div class="notification-content">
                            <p>
                                Conversation with <strong>{{ conv.dealer.username }}</strong> 
                                about <strong>{{ conv.car.year }} {{ conv.car.make }} {{ conv.car.model }}</strong>
                            </p>
                            <small class="notification-time">Started on: {{ conv.created_at.strftime('%b %d, %Y') }}</small>
                        </div>
                        <div class="notification-action">
                            <span class="btn">View Chat</span>
                        </div>
                    </div>
                </a>
            {% endfor %}
        {% else %}
            <p>You have not started any conversations yet.</p>
        {% endif %}
    </div>
{% endblock %}