.title-with-tag {
    display: flex;
    align-items: center;
    gap: 15px;
    flex-wrap: wrap;
}

/* Admin & Seller Actions */
.admin-actions, .question-context {
    background-color: hsl(var(--secondary));
    border: 1px solid hsl(var(--border));
    padding: 20px;
    margin-bottom: 20px;
    border-radius: var(--radius);
}
.admin-actions h3, .question-context h3 {
    margin-top: 0;
}
.admin-actions.pending {
    background-color: hsl(var(--warning) / 0.1);
    border-color: hsl(var(--warning));
}
.admin-actions .button-group {
    display: flex;
    gap: 10px;
    align-items: center;
}

.offer-form-container fieldset {
    border: 1px solid hsl(var(--border));
    padding: 1.5rem;
    border-radius: var(--radius);
    margin-bottom: 2rem;
}
.offer-form-container legend {
    padding: 0 0.5rem;
    font-weight: 600;
}

/* Q&A Section */
.qna-section .question-item {
    border: 1px solid hsl(var(--border));
    padding: 15px;
    border-radius: var(--radius);
    margin-bottom: 15px;
}
.qna-section .question-item p { margin: 0.25rem 0; }
.qna-section .question-item .meta {
    font-size: 0.9em;
    color: hsl(var(--muted-foreground));
}
.qna-section .answer-item {
    border-left: 3px solid hsl(var(--success));
    margin-top: 10px;
    padding-left: 15px;
    background-color: hsl(var(--success) / 0.05);
}
.qna-section .awaiting-answer {
    font-style: italic;
    color: hsl(var(--muted-foreground));
}
.ask-question-container { margin-top: 20px; }
#ask-question-form-div { display: none; margin-top: 10px; }
#question-success { color: hsl(var(--success)); margin-left: 10px; }
#question-error { color: hsl(var(--destructive)); }

/* Owner Actions on Detail Pages */
.owner-actions {
    background-color: hsl(var(--secondary));
    border: 1px solid hsl(var(--border));
    padding: 20px;
    margin-bottom: 20px;
    border-radius: var(--radius);
}
.owner-actions h4 { margin-top: 0; }

/* Offer Cards */
.offer-card {
    background-color: hsl(var(--card));
    border: 1px solid hsl(var(--border));
    border-radius: var(--radius);
    padding: 1.5rem;
    margin-bottom: 1.5rem;
}
.offer-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid hsl(var(--border));
}
.offer-price { font-size: 1.5rem; font-weight: 700; }
.offer-price-options {
    display: flex;
    gap: 1.5rem;
    align-items: center;
}
.offer-price.cash, .offer-price.loan {
    padding: 0.5rem 1rem;
    border-radius: var(--radius);
    text-align: center;
}
.offer-price.cash {
    background-color: hsl(var(--success) / 0.1);
    border: 1px solid hsl(var(--success));
}
.offer-price.loan {
    background-color: hsl(var(--info) / 0.1);
    border: 1px solid hsl(var(--info));
}
.offer-price span { display: block; font-size: 0.8em; font-weight: 500; color: hsl(var(--muted-foreground)); }
.offer-meta { text-align: right; color: hsl(var(--muted-foreground)); font-size: 0.9em; }
.offer-meta span { display: block; }
.offer-details-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 0.5rem 1.5rem;
    margin-bottom: 1rem;
}
.offer-footer {
    margin-top: 1.5rem;
    padding-top: 1.5rem;
    border-top: 1px solid hsl(var(--border));
    display: flex;
    justify-content: space-between;
    align-items: center;
}
.offer-card.lowest-bid-highlight {
    border: 2px solid hsl(var(--accent));
    background-color: hsl(var(--accent) / 0.1);
    box-shadow: 0 0 15px hsl(var(--accent) / 0.2);
    transform: scale(1.01);
}
.valid-until { font-size: 0.9em; color: hsl(var(--muted-foreground)); }

/* --- Responsive Offer Table on Mobile --- */
@media (max-width: 768px) {
    .offer-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
    }
    .offer-footer {
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
    }

    .offer-details-grid {
        grid-template-columns: 1fr; /* Stack details in a single column */
        gap: 0.75rem;
    }

    .offer-price-options {
        flex-direction: column;
        align-items: stretch; /* Make price boxes full width */
        width: 100%;
    }
    .accept-offer-form {
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
        width: 100%;
    }

    .accept-options {
        flex-direction: column;
        align-items: flex-start;
    }

    .accept-offer-form .btn { width: 100%; }

    .offer-qna-section .qna-item {
        padding: 0.75rem;
    }

    .offer-qna-section .qna-form {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }

    /* --- Responsive Dealer Bid Page --- */
    .sidebar-section {
        margin-bottom: 2rem;
    }
    .sidebar-section:last-child {
        margin-bottom: 0;
    }
    .sidebar-section h3 {
        margin-top: 0;
    }
    .request-details-sidebar {
        background-color: hsl(var(--secondary));
        padding: 1rem;
        border-radius: var(--radius);
    }

    .dealer-profile-page .detail-page-container {
        flex-direction: column;
    }
}

/* --- Deal Summary Page --- */
.deal-summary-card {
    background-color: hsl(var(--card));
    border: 1px solid hsl(var(--border));
    border-radius: var(--radius);
    max-width: 900px;
    margin: 2rem auto;
    overflow: hidden; /* To contain the header background */
}

.deal-header {
    text-align: center;
    padding: 2rem;
    background: var(--gradient-primary);
}
.deal-header h2 {
    margin: 0;
    font-size: 2.5rem;
    color: hsl(var(--accent));
    font-weight: 700;
}
.deal-header span {
    color: hsl(var(--muted-foreground));
    font-size: 1.1rem;
}

.deal-body {
    padding: 2rem;
}

.deal-parties {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 2rem;
    margin-bottom: 2rem;
    padding-bottom: 2rem;
    border-bottom: 1px solid hsl(var(--border));
}
.party {
    background-color: hsl(var(--secondary));
    padding: 1.5rem;
    border-radius: var(--radius);
}
.party h3 {
    margin-top: 0;
    border-bottom: 1px solid hsl(var(--border));
    padding-bottom: 0.5rem;
    margin-bottom: 1rem;
}
.party p {
    margin: 0.25rem 0;
}

/* --- Responsive Deal Summary --- */
@media (max-width: 768px) {
    .deal-parties {
        grid-template-columns: 1fr;
    }
    .deal-header h2 {
        font-size: 2rem;
    }
}

/* --- Rating Submission Section --- */
.rating-submission-section {
    padding-top: 2rem;
    margin-top: 2rem;
    border-top: 1px solid hsl(var(--border));
}
.rating-submission-section h2 {
    margin-top: 0;
}

.star-rating-input {
    display: flex;
    flex-direction: row-reverse; /* This is the trick to make the hover effect work correctly */
    justify-content: flex-end;
    gap: 0.25rem;
}
.star-rating-input input[type="radio"] { display: none; }
.star-rating-input label {
    font-size: 1.5rem; /* Reduced star size */
    color: hsl(var(--muted-foreground));
    cursor: pointer;
    transition: color 0.2s;
}
.star-rating-input label:hover,
.star-rating-input label:hover ~ label,
.star-rating-input input[type="radio"]:checked ~ label {
    color: hsl(var(--warning));
}

.already-rated .star-rating {
    font-size: 1.5rem;
    margin-bottom: 1rem;
}
.already-rated .star {
    color: hsl(var(--muted-foreground));
}
.already-rated .star.filled {
    color: hsl(var(--warning));
}

/* --- Dealer Profile Page Enhancements --- */
.dealer-profile-hero {
    background-color: hsl(var(--card));
    border: 1px solid hsl(var(--border));
    border-radius: var(--radius);
    padding: 2rem;
    display: flex;
    flex-wrap: wrap;
    gap: 2rem;
    align-items: center;
}
.dealer-info {
    display: flex;
    gap: 1.5rem;
    align-items: center;
    flex-grow: 1;
}
.dealer-logo-placeholder {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    background-color: hsl(var(--accent));
    color: hsl(var(--accent-foreground));
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 3rem;
    font-weight: 700;
    flex-shrink: 0;
}
.dealer-details h1 { margin: 0; font-size: 2.2rem; }
.dealer-name-verified { display: flex; align-items: center; gap: 1rem; }
.dealer-tagline { font-size: 1.1rem; color: hsl(var(--muted-foreground)); margin: 0.25rem 0 0.5rem 0; }
.dealer-rating-summary .star { font-size: 1.5rem; }
.dealer-rating-summary .star.filled { color: hsl(var(--warning)); }
.dealer-rating-summary .rating-text { margin-left: 0.5rem; font-weight: 500; }

.review-list { display: grid; gap: 1.5rem; }
.review-header { display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem; }
.review-text { font-style: italic; color: hsl(var(--muted-foreground)); border-left: 3px solid hsl(var(--border)); padding-left: 1rem; margin: 0 0 1rem 0; }
